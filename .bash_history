PS1='PROMPT_PSPKKZHCDTSV\[\]>' PS2='PROMPT_PSPKKZHCDTSV\[\]+' PROMPT_COMMAND=''
export PAGER=cat
bind 'set enable-bracketed-paste off' >/dev/null 2>&1 || true
display () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved image data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayHTML () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved html data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayJS () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved javascript data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
export NOTEBOOK_BASH_KERNEL_CAPABILITIES="image,html,javascript"
PS1='PROMPT_TPKHRUGGVLPG\[\]>' PS2='PROMPT_TPKHRUGGVLPG\[\]+' PROMPT_COMMAND=''
export PAGER=cat
bind 'set enable-bracketed-paste off' >/dev/null 2>&1 || true
display () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved image data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayHTML () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved html data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayJS () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved javascript data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
export NOTEBOOK_BASH_KERNEL_CAPABILITIES="image,html,javascript"
PS1='PROMPT_EBZQOGHHNTJQ\[\]>' PS2='PROMPT_EBZQOGHHNTJQ\[\]+' PROMPT_COMMAND=''
export PAGER=cat
bind 'set enable-bracketed-paste off' >/dev/null 2>&1 || true
display () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved image data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayHTML () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved html data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayJS () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved javascript data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
export NOTEBOOK_BASH_KERNEL_CAPABILITIES="image,html,javascript"
PS1='PROMPT_MBQIVQPPNKUS\[\]>' PS2='PROMPT_MBQIVQPPNKUS\[\]+' PROMPT_COMMAND=''
export PAGER=cat
bind 'set enable-bracketed-paste off' >/dev/null 2>&1 || true
display () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved image data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayHTML () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved html data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayJS () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved javascript data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
export NOTEBOOK_BASH_KERNEL_CAPABILITIES="image,html,javascript"
PS1='PROMPT_NJKYAFWVLMVI\[\]>' PS2='PROMPT_NJKYAFWVLMVI\[\]+' PROMPT_COMMAND=''
export PAGER=cat
bind 'set enable-bracketed-paste off' >/dev/null 2>&1 || true
display () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved image data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayHTML () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved html data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
displayJS () {     display_id="$1"; shift;     TMPFILE=$(mktemp ${TMPDIR-/tmp}/bash_kernel.XXXXXXXXXX);     cat > $TMPFILE;     prefix="bash_kernel: saved javascript data to: ";     if [[ "${display_id}" != "" ]]; then         echo "${prefix}(${display_id}) $TMPFILE" >&2;     else         echo "${prefix}$TMPFILE" >&2;     fi; }
export NOTEBOOK_BASH_KERNEL_CAPABILITIES="image,html,javascript"
git pull
ls ~/.ssh/id_ed25519.pub
cat ~/.ssh/id_rsa.pub
ssh -T git@github.com
git pull
git branch --set-upstream-to=origin/main main
git pull
cd lighteval-epfl-mnlp/
bash eval.sh 
my_venvs_activate mnlp_m2
bash eval.sh 
bash eval.sh 
bash eval.sh 
my_venvs_activate mnlp_m2
bash eval.sh 
cd lighteval-epfl-mnlp/
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
bash eval.sh 
my_venvs_activate mnlp_m2
pip install --upgrade transformers
nvidia-smi
my_venvs_activate mnlp_m2
cd lighteval-epfl-mnlp/
python hf.py
cd .
cd ..
python hf.py
python model_test.py
python model_test.py
python model_test.py
python model_test.py
python model_test.py
python model_test.py
python model_test.py
python model_test.py
python model_test.py
python model_test.py
pip install --upgrade accelerate transformers
python model_test.py
accelerate launch model_test.py
accelerate config
accelerate launch model_test.py
accelerate launch model_test.py
python small_model_test.py 
python small_model_test.py 
python small_model_test.py 
python small_model_test.py 
python small_model_test.py 
python small_model_test.py 
python small_model_test.py 
python small_model_test.py 
type my_venvs_activate
pip install ipykernel
python -m ipykernel install     --user     --name mnlp_m2     --display-name "Python (mnlp_m2)"
pip install pynvml
nvidia-smi
git add .
git add small_model_test.ipynb
git commit -m "added small_model_test.ipynb"
git push
huggingface-cli login
huggingface-cli whoami
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
ps aux | grep -E 'jupyter|ipykernel'
kill 1
ps aux | grep -E 'jupyter|ipykernel'
pkill -f jupyter-labhub
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nvidia-smi
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nano ~/.local/share/jupyter/kernels/mnlp_m2/kernel.json
nvcc --version
pip uninstall bitsandbytes
my_venvs_activate mnlp_m2
pip uninstall bitsandbytes
pip install --upgrade --ignore-installed bitsandbytes-cuda121
pip install --upgrade bitsandbytes
cat > ~/gcc_wrapper << 'EOF'
#!/bin/bash
# real gcc + -B so it finds the libexec dir for your distro
REAL_GCC="/bin/gcc"
GCC_LIBEXEC_DIR="/usr/libexec/gcc/x86_64-linux-gnu/13/"

exec "$REAL_GCC" -B "$GCC_LIBEXEC_DIR" "$@"
EOF

chmod +x ~/gcc_wrapper
unset  GCC_EXEC_PREFIX
export CC="$HOME/gcc_wrapper"
ls -l ~/gcc_wrapper
~/gcc_wrapper --version
python3 - <<EOF
import os
print("CC in Python:", os.environ.get("CC"))
EOF

pip uninstall bitsandbytes
rm -rf /home/my_venvs/mnlp_m2/lib/python3.12/site-packages/~itsandbytes
rm -rf /home/my_venvs/mnlp_m2/lib/python3.12/site-packages/~itsandbytes
pip install --force-reinstall --no-cache-dir bitsandbytes
pip install --upgrade --force-reinstall --ignore-installed bitsandbytes
pip uninstall -y bitsandbytes
rm -rf /home/my_venvs/mnlp_m2/lib/python3.12/site-packages/~itsandbytes
pip install bitsandbytes==0.44.0
echo $CC
pip install 'triton>=3.0,<4.0'
pip uninstall -y bitsandbytes
rm -rf /home/my_venvs/mnlp_m2/lib/python3.12/site-packages/~itsandbytes
pip install --no-cache-dir bitsandbytes==0.44.0
nano /home/my_venvs/mnlp_m2/pyvenv.cfg
nano /home/my_venvs/mnlp_m2/pyvenv.cfg
my_venvs_activate mnlp_m2
pip install peft
pip install --upgrade transformers
pip install unsloth
my_venvs_activate mnlp_m2
nvcc --version
pip uninstall -y bitsandbytes
pip install --ignore-installed bitsandbytes-cuda120
sudo apt-get install cuda-toolkit-11-8
pip install --no-binary bitsandbytes bitsandbytes
pip install --upgrade triton unsloth
my_venvs_create mnlp_m2b
my_venvs_activate mnlp_m2b
pip install -r requirements.txt
python -m ipykernel install     --user     --name mnlp_m2b     --display-name "Python (mnlp_m2b)"
pip install peft
pip install --upgrade transformers
cat > ~/gcc_wrapper << 'EOF'
#!/bin/bash
# Wrap system gcc and force the right libexec dir

REAL_GCC="$(which gcc)"
GCC_LIBEXEC_DIR="$(gcc -print-libexec-dir)"

exec "$REAL_GCC" -B "$GCC_LIBEXEC_DIR" "$@"
EOF

chmod +x ~/gcc_wrapper
unset GCC_EXEC_PREFIX
export CC="$HOME/gcc_wrapper"
ls -l ~/gcc_wrapper
echo $CC
$CC --version
$CC -v -E -x c /dev/null -o /dev/null
gcc -print-file-name=cc1
locate /cc1
find /usr/lib/gcc -type f -name cc1
cat > ~/gcc_wrapper << 'EOF'
#!/bin/bash
# Wrap system gcc and force the right libexec dir

REAL_GCC="$(which gcc)"
GCC_LIBEXEC_DIR="/usr/lib/gcc/x86_64-linux-gnu/12"

exec "$REAL_GCC" -B "$GCC_LIBEXEC_DIR" "$@"
EOF

chmod +x ~/gcc_wrapper
unset GCC_EXEC_PREFIX
export CC="$HOME/gcc_wrapper"
$CC -v -E -x c /dev/null -o /dev/null
pip install unsloth
pip uninstall xformers
rm -rf /home/my_venvs/mnlp_m2b/lib/python3.12/site-packages/xformers*
rm -rf /home/my_venvs/mnlp_m2b/lib/python3.12/site-packages/~formers
export TORCH_CUDA_ARCH_LIST="8.0;8.6"  
pip install --force-reinstall --no-cache-dir xformers
export XFORMERS_DISABLE_MEMORY_EFFICIENT_ATTENTION=1
export XFORMERS_DISABLE_MEMORY_EFFICIENT_ATTENTION=1
jupyter notebook
jupyter notebook model.ipynb 
jupyter lab
pip uninstall xformers
rm -rf /home/my_venvs/mnlp_m2b/lib/python3.12/site-packages/xformers*
rm -rf /home/my_venvs/mnlp_m2b/lib/python3.12/site-packages/~formers
git clone https://github.com/facebookresearch/xformers.git
cd xformers
nvidia-smi --query-gpu=name,compute_cap --format=csv
export TORCH_CUDA_ARCH_LIST="8.0"
pip install -r requirements.txt
pip install -e .
git submodule sync
git submodule update --init --recursive
export TORCH_CUDA_ARCH_LIST="8.0"
pip install -r requirements.txt
pip install -e .
pip install .
pip uninstall xformers
rm -rf ~/xformers
cd .
cd ..
cd ~
pip uninstall xformers
find . -type d \( -name "build" -o -name "dist" -o -name "*.egg-info" \) -exec rm -rf {} +
pip install xformers
pip install xformers
python3 -m ensurepip --upgrade
pip install xformers
pip install json
pip install json
pip install xformers
python -m pip install --upgrade pip
python -m pip install --upgrade pip
my_venvs_activate mnlp_m2b
pip install xformers
python -m ensurepip --upgrade
python -m pip install --upgrade pip setuptools wheel
my_venvs_activate mnlp_m2
pip install bitsandbytes==0.44.0 triton>=3.0,<4.0 unsloth torch faiss-gpu datasets torchaudio
pip install bitsandbytes==0.44.0
pip install triton>=3.0,<4.0
pip install 'triton>=3.0,<4.0'
pip install --no-cache-dir bitsandbytes==0.44.0 unsloth
pip install nltk anyio httpcore sniffio sentence-transformers GitPython sacrebleu scikit-learn typer
pip install   "SQLAlchemy>=1.4,<3"   "packaging<25"   "numpy<2.0"
python3 - <<EOF
import os
# Ensure we’re still using the wrapper:
del os.environ["GCC_EXEC_PREFIX"]
os.environ["CC"] = "/home/gcc_wrapper"

import triton, bitsandbytes as bnb, unsloth
import numpy, packaging, sqlalchemy

print("✅ triton       ", triton.__version__)
print("✅ bitsandbytes ", bnb.__version__)
print("✅ unsloth      ", unsloth.__version__)
print("✅ numpy        ", numpy.__version__)
print("✅ packaging    ", packaging.__version__)
print("✅ sqlalchemy   ", sqlalchemy.__version__)
EOF

pip install --upgrade 'triton>=3.6.0,<4.0.0'
python3 - <<EOF
import os
# Ensure we’re still using the wrapper:
del os.environ["GCC_EXEC_PREFIX"]
os.environ["CC"] = "/home/gcc_wrapper"

import triton, bitsandbytes as bnb, unsloth
import numpy, packaging, sqlalchemy

print("✅ triton       ", triton.__version__)
print("✅ bitsandbytes ", bnb.__version__)
print("✅ unsloth      ", unsloth.__version__)
print("✅ numpy        ", numpy.__version__)
print("✅ packaging    ", packaging.__version__)
print("✅ sqlalchemy   ", sqlalchemy.__version__)
EOF

pip install --upgrade triton
nano /home/my_venvs/mnlp_m2/pyvenv.cfg
pip install triton
pip uninstall triton
pip install git+https://github.com/openai/triton@main
pip install triton
my_venvs_create mnlp_m2c
cat > ~/gcc_wrapper << 'EOF'
#!/bin/bash
# Wrap system gcc and force the right libexec dir

REAL_GCC="$(which gcc)"
GCC_LIBEXEC_DIR="/usr/lib/gcc/x86_64-linux-gnu/13"  # <— use the path you discovered

exec "$REAL_GCC" -B "$GCC_LIBEXEC_DIR" "$@"
EOF

chmod +x ~/gcc_wrapper
unset GCC_EXEC_PREFIX
export CC="$HOME/gcc_wrapper"
$CC -v -E -x c /dev/null -o /dev/null
cat > ~/gcc_wrapper << 'EOF'
#!/bin/bash
# Wrap system gcc and force the right libexec dir

REAL_GCC="$(which gcc)"
GCC_LIBEXEC_DIR="/usr/lib/gcc/x86_64-linux-gnu/12"

exec "$REAL_GCC" -B "$GCC_LIBEXEC_DIR" "$@"
EOF

chmod +x ~/gcc_wrapper
export CC="$HOME/gcc_wrapper"
export CC="$HOME/gcc_wrapper"
$CC -v -E -x c /dev/null -o /dev/null
pip install unsloth
my_venvs_activate mnlp_m2c
pip install unsloth
pip install unsloth
python -m ensurepip --upgrade
python -m pip install --upgrade pip setuptools wheel
my_venvs_create mnlp_m2d
my_venvs_activate mnlp_m2d
pip install peft
rm -rf /home/my_venvs/mnlp_m2c/lib/python3.12/site-packages/pip*
my_venvs_activate mnlp_m2c
python -m ensurepip --default-pip
less /home/my_venvs/mnlp_m2c/pyvenv.cfg
my_venvs_activate mnlp_m2c
pip install unsloth
less /home/my_venvs/mnlp_m2c/pyvenv.cfg
my_venvs_activate mnlp_m2c
pip install unsloth
deactivate
my_venvs_activate mnlp_m2d
pip install unsloth
deactivate
my_venvs_activate mnlp_m2c
pip install peft
my_venvs_activate mnlp_m2b
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
my_venvs_activate mnlp_m2b
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
my_venvs_activate mnlp_m2b
python model.py
python model.py
my_venvs_activate mnlp_m2b
python model.py
python model.py
my_venvs_activate mnlp_m2
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
python model.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python eval.py
python eval.py
python eval.py
dir
~
cd~
cd ..
eval.sh
bash eval.sh
my_venvs_activate mnlp_m2b
eval.sh
bash eval.sh
deactivate
my_venvs_activate mnlp_m2
bash eval.sh
bash eval.sh
bash eval.sh
bash eval.sh
bash eval.sh
my_venvs_activate mnlp_m2
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py

python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
python model_reloaded.py
my_venvs_activate mnlp_m2
bash eval.sh
pip uninstall bitsandbytes
deactivate
my_venvs_activate mnlp_m2c
bash eval.sh
pip install -e .[quantization]
bash eval.sh
my_venvs_activate mnlp_m2c
python model.py
python model.py
python model.py
python model.py
python model.py
my_venvs_activate mnlp_m2
python model.py
python model.py
my_venvs_activate mnlp_m2b
deactivate
my_venvs_activate mnlp_m2b
deactivate
my_venvs_activate mnlp_m2
bash eval.sh
cd lighteval-epfl-mnlp/
bash eval.sh
bash eval.sh
bash eval.sh
bash eval.sh
my_venvs_activate mnlp_m2b
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
pip install --upgrade --force-reinstall --no-cache-dir unsloth unsloth_zoo datasets evaluate transformers
deactivate
my_venvs_activate mnlp_m2c
pip install --upgrade --force-reinstall --no-cache-dir unsloth unsloth_zoo datasets evaluate transformers
python model_LoRA_unsloth.py 
cat > ~/gcc_wrapper << 'EOF'
#!/bin/bash
REAL_GCC="/bin/gcc"
GCC_LIBEXEC_DIR="/usr/libexec/gcc/x86_64-linux-gnu/13/"
exec "$REAL_GCC" -B "$GCC_LIBEXEC_DIR" "$@"
EOF

chmod +x ~/gcc_wrapper
unset GCC_EXEC_PREFIX
export CC="$HOME/gcc_wrapper"
export CXX="$HOME/gcc_wrapper"
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
python model_LoRA_unsloth.py 
